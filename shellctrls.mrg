42,44d41
<   //JKOZ Custom filtering for the files
<   TFileValidateProc = procedure (const FileName:string; const IsDirectory : Boolean; var Accept:Boolean);
< 
54d51
<     FOnFilterName: TFileValidateProc;
60d56
<     procedure SetOnFilterName(AValue: TFileValidateProc);
79,80c75
<       AMask: string; AObjectTypes: TObjectTypes; AResult: TStrings; AFileSortType: TFileSortType = fstNone;
<       CustomFilter:TFileValidateProc = nil);
---
>       AMask: string; AObjectTypes: TObjectTypes; AResult: TStrings; AFileSortType: TFileSortType = fstNone);
90c85
<     property OnFilterName: TFileValidateProc read FOnFilterName write SetOnFilterName;
---
> 
155d149
<     //property OnFilterName;
366,371d359
< procedure TCustomShellTreeView.SetOnFilterName(AValue: TFileValidateProc);
< begin
<   if FOnFilterName=AValue then Exit;
<   FOnFilterName:=AValue;
< end;
< 
453,454c441
<   AMask: string; AObjectTypes: TObjectTypes; AResult: TStrings; AFileSortType: TFileSortType;
<   CustomFilter:TFileValidateProc = nil);
---
>   AMask: string; AObjectTypes: TObjectTypes; AResult: TStrings; AFileSortType: TFileSortType);
500c487
<         //Application.ProcessMessages;
---
>         Application.ProcessMessages;
522,528d508
<         //JKOZ ADDED CUSTOM FILTERING
<         //if @CustomFilter <> nil then begin
<         //  DoFileFilter(DirInfo.Name, IsDirectory, AddFile);
<         if @CustomFilter <> nil then
<           CustomFilter(DirInfo.Name, IsDirectory, AddFile);
<         //  Self;
<         //end;
